<nav class="hidden sm:flex sm:text-sm lg:text-xs px-2">
  {{ $currentPage := . }}
  {{ with ((site.GetPage "section" "settings").Resources.GetMatch "navigation.md") }}
    {{ range .Params.main }}
      {{ if eq .type "page" }}
        {{ with (site.GetPage .page) }}
          <a href="{{ .RelPermalink }}" class="block text-gray-800 p-2{{ if eq $currentPage.RelPermalink .RelPermalink }} active{{ end }}">
            {{- .LinkTitle -}}
          </a>
        {{ end }}
      {{ end }}

      {{ if eq .type "custom" }}
        <a href="{{ .url }}" class="block text-gray-800 p-2" target="{{ if .external }}_blank{{ end }}">
          {{- .linktitle -}}
          {{- if .external -}}
            <span
              class="align-baseline inline-block icon"
              aria-label="(opens in new window)"
              style="font-size: 0.8em; transform: translateY(-0.15em); margin-left: 0.25em;"
            >
              {{- partial "icons/action/open_in_new.svg" -}}
            </span>
          {{- end -}}
        </a>
      {{ end }}
    {{ end }}
  {{ end }}
</nav>